{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Metadata": {
        "AWS::CloudFormation::Designer": {
            "4bf4f849-e921-4eca-9d15-437b9106f914": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 270,
                    "y": 150
                },
                "z": 0,
                "embeds": []
            },
            "fff713ec-ca78-49ca-b84f-7abe7aaf963e": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 390,
                    "y": 150
                },
                "z": 0,
                "embeds": []
            },
            "17e7b84b-42e8-40fb-ab36-92f88eecc76e": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 510,
                    "y": 150
                },
                "z": 0,
                "embeds": []
            },
            "55d50e98-95ff-45cd-8355-095a498f1c67": {
                "size": {
                    "width": 60,
                    "height": 60
                },
                "position": {
                    "x": 630,
                    "y": 150
                },
                "z": 0,
                "embeds": []
            }
        }
    },
    "Resources": {
        "CodeDeployEC2S3": {
            "Type": "AWS::IAM::ManagedPolicy",
            "Properties": {
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Action": [
                                "s3:Get*",
                                "s3:List*"
                            ],
                            "Effect": "Allow",
                            "Resource": [
                                "arn:aws:s3:::codedeploy.zhaocxu.me"
                            ]
                        }
                    ]
                },
                "ManagedPolicyName": "CodeDeploy-EC2-S3"
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "4bf4f849-e921-4eca-9d15-437b9106f914"
                }
            }
        },
        "CircleCIUploadToS3": {
            "Type": "AWS::IAM::ManagedPolicy",
            "Properties": {
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "s3:PutObject",
                                "s3:Get*",
                                "s3:List*"
                            ],
                            "Resource": [
                                "arn:aws:s3:::codedeploy.zhaocxu.me"
                            ]
                        }
                    ]
                },
                "ManagedPolicyName": "CircleCI-Upload-To-S3",
                "Users": [
                    "circleci"
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "fff713ec-ca78-49ca-b84f-7abe7aaf963e"
                }
            }
        },
        "CircleCICodeDeploy": {
            "Type": "AWS::IAM::ManagedPolicy",
            "Properties": {
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "codedeploy:RegisterApplicationRevision",
                                "codedeploy:GetApplicationRevision"
                            ],
                            "Resource": [
                                "arn:aws:codedeploy:us-east-1:896116135336:application:csye6225-webapp"
                            ]
                        },
                        {
                            "Effect": "Allow",
                            "Action": [
                                "codedeploy:CreateDeployment",
                                "codedeploy:GetDeployment"
                            ],
                            "Resource": [
                                "*"
                            ]
                        },
                        {
                            "Effect": "Allow",
                            "Action": [
                                "codedeploy:GetDeploymentConfig"
                            ],
                            "Resource": [
                                "arn:aws:codedeploy:us-east-1:896116135336:deploymentconfig:CodeDeployDefault.OneAtATime",
                                "arn:aws:codedeploy:us-east-1:896116135336:deploymentconfig:CodeDeployDefault.HalfAtATime",
                                "arn:aws:codedeploy:us-east-1:896116135336:deploymentconfig:CodeDeployDefault.AllAtOnce"
                            ]
                        }
                    ]
                },
                "ManagedPolicyName": "CircleCI-Code-Deploy",
                "Users": [
                    "circleci"
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "17e7b84b-42e8-40fb-ab36-92f88eecc76e"
                }
            }
        },
        "circleciec2ami": {
            "Type": "AWS::IAM::ManagedPolicy",
            "Properties": {
                "PolicyDocument": {
                    "Version": "2012-10-17",
                    "Statement": [
                        {
                            "Effect": "Allow",
                            "Action": [
                                "ec2:AttachVolume",
                                "ec2:AuthorizeSecurityGroupIngress",
                                "ec2:CopyImage",
                                "ec2:CreateImage",
                                "ec2:CreateKeypair",
                                "ec2:CreateSecurityGroup",
                                "ec2:CreateSnapshot",
                                "ec2:CreateTags",
                                "ec2:CreateVolume",
                                "ec2:DeleteKeyPair",
                                "ec2:DeleteSecurityGroup",
                                "ec2:DeleteSnapshot",
                                "ec2:DeleteVolume",
                                "ec2:DeregisterImage",
                                "ec2:DescribeImageAttribute",
                                "ec2:DescribeImages",
                                "ec2:DescribeInstances",
                                "ec2:DescribeInstanceStatus",
                                "ec2:DescribeRegions",
                                "ec2:DescribeSecurityGroups",
                                "ec2:DescribeSnapshots",
                                "ec2:DescribeSubnets",
                                "ec2:DescribeTags",
                                "ec2:DescribeVolumes",
                                "ec2:DetachVolume",
                                "ec2:GetPasswordData",
                                "ec2:ModifyImageAttribute",
                                "ec2:ModifyInstanceAttribute",
                                "ec2:ModifySnapshotAttribute",
                                "ec2:RegisterImage",
                                "ec2:RunInstances",
                                "ec2:StopInstances",
                                "ec2:TerminateInstances"
                            ],
                            "Resource": "*"
                        }
                    ]
                },
                "ManagedPolicyName": "circleci-ec2-ami",
                "Users": [
                    "circleci"
                ]
            },
            "Metadata": {
                "AWS::CloudFormation::Designer": {
                    "id": "55d50e98-95ff-45cd-8355-095a498f1c67"
                }
            }
        }
    }
}